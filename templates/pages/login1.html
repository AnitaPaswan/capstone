// Initialize Auth0Lock
var lock = new Auth0Lock('YOUR_CLIENT_ID', 'YOUR_AUTH0_DOMAIN', {
  auth: {
    responseType: 'token',
    redirectUrl: 'https://your-redirect-url.com/callback',
    audience: 'your-audience'
  }
});

// Add a click event listener to trigger Auth0Lock
document.getElementById('login-button').addEventListener('click', function() {
  lock.show();
});

// Listen for the authenticated event when the user logs in
lock.on('authenticated', function(authResult) {
  // Get the access token from the authentication result
  var accessToken = authResult.accessToken;

  // Use the access token to make an authenticated API request when a different button is clicked
  document.getElementById('api-request-button').addEventListener('click', function() {
    var apiEndpoint = 'https://your-api-endpoint.com/your-resource';

    fetch(apiEndpoint, {
      method: 'GET', // or 'POST', 'PUT', 'DELETE', etc.
      headers: {
        'Authorization': 'Bearer ' + accessToken,
        'Content-Type': 'application/json' // Add other headers as needed
      }
    })
    .then(response => {
      if (response.ok) {
        // Handle the API response
        return response.json();
      } else {
        // Handle API request error
        console.error('API Request Error:', response.status);
      }
    })
    .then(data => {
      // Process the API response data
      console.log('API Response:', data);
    });
  });
});
